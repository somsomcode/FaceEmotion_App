<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>표정 감정 분석</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.1.9/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.1.9/addons/p5.sound.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/ml5js/Intro-ML-Arts-IMA@ml5-build-10-7-19/ml5_build/ml5.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <style>
      body {
        background-color: white;
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
        position: relative;
        overflow: hidden;
      }

      /* 배경 동영상 설정 */
      #backgroundVideo {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1; /* 동영상을 뒤에 배치 */
      }

      /* 제목을 상단 중앙에 배치 */
      #title {
        text-align: center;
        color: white; /* 텍스트를 배경과 대비되게 흰색으로 설정 */
        z-index: 1;
        margin-top: 0; /* 상단 여백 제거 */
       padding-top: 0; /* 상단 패딩 제거 */
      }

      /* 비디오와 텍스트를 가로로 정렬 */
      #container {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        gap:40px; /* 비디오와 텍스트 간의 간격 */
        z-index: 1;
        color: white; /* 텍스트를 흰색으로 설정 */
      }

      /* 카메라와 버튼을 세로로 정렬 */
      #videoContainer {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 500px; /* 카메라 영역 고정 */
        position: relative; /* 자식 요소를 절대 위치로 배치할 수 있도록 함 */
        justify-content: flex-start; /* 상단에 요소들이 위치하도록 설정 */
      }

      #buttonContainer {
        display: flex;
        justify-content: center; /* 버튼을 가로로 중앙 배치 */
        gap: 20px; /* 버튼 간의 간격 */
        margin-top: 10px;
    }

      /* 카메라 스타일 */
      #videoInput {
        width: 100%;
        height: auto;
        border-radius: 20px;
      }

          /* 텍스트를 카메라 위에 얹기 위한 절대 위치 설정 */
      #textContainer {
        display: flex;
        flex-direction: column;
        width: auto; /* 텍스트 영역을 카메라 너비에 맞춤 */
        font-size: 12px; /* 폰트 크기 */
        color: rgb(255, 255, 255); /* 텍스트 색상 흰색으로 설정 */
        position: absolute; /* 절대 위치 지정 */
        top: 100; /* 카메라의 상단에 배치 */
        left: 30%;
        padding: 10px; /* 약간의 패딩 추가 */
      }

      /* Time 글자 숨기기 */
      #timerContainer {
        display: none;
      }

          button {
            padding: 10px 30px;
            font-size: 20px;
            z-index: 1;
            color: white; /* 텍스트 색상 */
            background: linear-gradient(to right, #25056c, #553bbf); /* 그라데이션 배경 */
            border: none; /* 테두리 제거 */
            border-radius: 15px; /* 둥근 모서리 */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* 버튼에 그림자 추가 */
            cursor: pointer; /* 커서를 손가락 모양으로 변경 */
            transition: all 0.3s ease; /* 모든 속성에 부드러운 전환 효과 */
        }
        
        button:hover {
            background: linear-gradient(to right, #2575fc, #6a11cb); /* 호버 시 그라데이션 반전 */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2); /* 호버 시 그림자 강하게 */
            transform: translateY(-3px); /* 호버 시 버튼이 살짝 올라가는 효과 */
        }
    
    </style>
  </head>
  <body>
    <!-- 배경 비디오 -->
    <video id="backgroundVideo" autoplay muted loop>
      <source src="/video/scan.mp4" type="video/mp4" />
      <!-- 비디오 파일 경로를 추가하세요 -->
    </video>

    <!-- 제목을 상단 중앙에 배치 -->
    <div id="title">
      <!-- <h2>오늘 당신의 하루를 표정으로 표현해주세요.</h2>
      <p>
        10초동안 당신의 얼굴에서 드러나는 다양한 표정을 수집하여 감정을
        도출합니다. <br />
        준비가 되었다면 감정 분석 시작 버튼을 눌러주세요. -->
      </p>
    </div>

    <!-- 비디오와 텍스트를 가로로 정렬 -->
    <div id="container">
      <!-- 카메라 및 버튼 섹션 -->
      <div id="videoContainer">
        <video id="videoInput" width="640" height="480" autoplay muted></video>

        <!-- 버튼을 가로로 나란히 배치 -->
        <div id="buttonContainer">
          <button id="startButton">분석 시작</button>
          <button id="stopButton" disabled>분석 정지</button>
        </div>
      </div>

      <!-- 텍스트 섹션 (카메라 오른쪽에 배치) -->
      <div id="textContainer">
        <p><strong>표정 감지:</strong> <br /><span id="expressionResult"></span></p>

        <!-- 타이머 섹션 (시작 버튼을 눌렀을 때 표시) -->
        <div id="timerContainer">
          <p style="font-size: 24px;"><strong>Time </strong>:<span id="timer"></span></p>
        </div>
      </div>
    </div>

    <script src="face.js"></script>
    <script>
      // 감정 분석 시작 버튼
      document.getElementById('startButton').addEventListener('click', function () {
        // 타이머가 포함된 div를 화면에 표시
        document.getElementById('timerContainer').style.display = 'block';

        // 타이머를 시작하는 코드 추가 (예시)
        let timeLeft = 10;
        const timerElement = document.getElementById('timer');
        timerElement.textContent = timeLeft;

        const countdown = setInterval(() => {
          timeLeft--;
          timerElement.textContent = timeLeft;

          if (timeLeft <= 0) {
            clearInterval(countdown);
            // 타이머 완료 후의 동작 추가 가능
          }
        }, 1000);
      });
    </script>
  </body>
</html>
